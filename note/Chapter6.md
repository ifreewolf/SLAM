# 非线性优化

<B>主要目标</B>

> 1. 理解最小二乘法的含义和处理方式。
> 2. 理解高斯牛顿法(Gauss-Newton's method)、列文伯格-马夸尔特方法(Levenburg-Marquadt's method)等下降策略。
> 3. 学习Ceres库和g2o库的基本使用方法。

方程中的位姿可以由变换矩阵来描述，然后用李代数进行优化。观测方程由相机成像模型给出，其中内参是随相机固定的，而外参则是相机的位姿。

由于噪声的存在，运动方程和观测方程的等式必定不是精确成立的。尽管相机可以非常好地符合针孔模型，但遗憾的是，得到的数据通常是受各种未知噪声影响的。与其假设数据必须符合方程，不如讨论如何在有噪声的数据中进行准确的状态估计。

解决状态估计问题需要一定程度的最优化背景知识，本节将介绍基本的无约束非线性优化方法，同时介绍优化库g2o和Ceres的使用方式。

# 6.1 状态估计问题

## 6.1.1 批量状态估计与最大后验估计

SLAM模型由运动方程和观察方程构成构成：

$$
\left\{ \begin{aligned} x_l = f(x_{k-1}, u_k) + w_k \\ z_{k,j} = h(y_j, x_k) + v_{k,j} \end{aligned} \right. . \tag{6.1}
$$

> $x_k$是相机的位姿，用SE(3)来描述。观测方程就是针孔相机模型。

位姿变量$x_k$可以由$T_k \in SE(3)$表达，假设在$x_k$处对路标$y_j$进行了一次观测，对应到图像上的像素位置$z_{k,j}$，那么，观测方程可以表示成：

$$
sz_{k,j}=K(R_k y_j + t_k). \tag{6.2}
$$

> 其中$K$为相机内参，$s$为像素点的距离，也是$(R_k y_j + t_k)$的第三个分量。